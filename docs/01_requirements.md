# 01. 機能要件

## 必須機能
1. **CSVインポート**
   - 拡張子: .csv / 文字コード: UTF-8 / BOM許容
   - マッピング: 取引先・商品・数量・単価（任意）・受注日・注文番号など
   - 取込前バリデーション、重複検出、ロールバック、エラーレポート

2. **手動登録/編集**
   - 単票/明細編集、複製、取消
   - 取引先未登録時のその場作成（モーダル）

3. **会社別単価**
   - デフォルトは商品の標準単価
   - 会社×商品で**上書き**、**期間**や**数量条件**の指定可（最適ルール自動選択）

4. **請求書生成**
   - 締め日（例: 月末/15日など）・請求対象期間の選択
   - 税計算、端数処理（切り捨て/切り上げ/四捨五入、単位=円）
   - PDFテンプレート（発行会社ごとにヘッダー/社印/口座）
   - 再発行/取消/修正履歴

5. **発行会社を複数管理**
   - ロゴ/印影/所在地/適格請求書登録番号/口座/担当者

6. **監査＆ログ**
   - 誰が・いつ・何をした（作成/更新/削除/発行）
   - CSV取込ジョブの結果、エラーファイルDL

7. **権限管理**
   - 管理者/経理/閲覧のみ 等のロール

## 非機能要件
- パフォーマンス: 取引先1,000社/受注100万行/年を想定（バッチ/非同期で対応）
- 可用性: RPO/RTOは社内要件に準拠（最低限DBバックアップ/スナップショット）
- セキュリティ: 最低限OWASP ASVS L1、2FA対応、IP制限（任意）
